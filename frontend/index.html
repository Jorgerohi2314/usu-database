<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sistema de Gestión de Usuarios</title>
    
    <!-- Bootstrap 5 CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Bootstrap Icons -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.0/font/bootstrap-icons.css">
    <!-- Estilos personalizados -->
    <link rel="stylesheet" href="css/styles.css">
</head>
<body>
    <!-- Barra de navegación -->
    <nav class="navbar navbar-expand-lg navbar-dark bg-primary">
        <div class="container">
            <a class="navbar-brand" href="#">
                <i class="bi bi-people-fill"></i> Sistema de Gestión de Usuarios
            </a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav ms-auto">
                    <li class="nav-item">
                        <a class="nav-link active" href="#" id="nav-lista">Lista de Usuarios</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#" id="nav-nuevo">Nuevo Usuario</a>
                    </li>
                </ul>
            </div>
        </div>
    </nav>

    <!-- Contenedor principal -->
    <div class="container mt-4">
        <!-- Lista de usuarios -->
        <div id="vista-lista" class="vista">
            <div class="d-flex justify-content-between align-items-center mb-4">
                <h2>Lista de Usuarios</h2>
                <button class="btn btn-success" id="btn-nuevo-usuario">
                    <i class="bi bi-plus-circle"></i> Nuevo Usuario
                </button>
            </div>
            
            <!-- Barra de búsqueda -->
            <div class="row mb-3">
                <div class="col-md-6">
                    <div class="input-group">
                        <span class="input-group-text"><i class="bi bi-search"></i></span>
                        <input type="text" class="form-control" id="busqueda" placeholder="Buscar por nombre, email...">
                    </div>
                </div>
                <div class="col-md-6">
                    <select class="form-select" id="filtro-colectivo">
                        <option value="">Todos los colectivos</option>
                        <option value="Desempleados de larga duración">Desempleados de larga duración</option>
                        <option value="Jóvenes">Jóvenes</option>
                        <option value="Mujeres">Mujeres</option>
                        <option value="Personas con discapacidad">Personas con discapacidad</option>
                        <option value="Mayores de 45 años">Mayores de 45 años</option>
                    </select>
                </div>
            </div>
            
            <!-- Tabla de usuarios -->
            <div class="table-responsive">
                <table class="table table-striped table-hover">
                    <thead class="table-dark">
                        <tr>
                            <th>ID</th>
                            <th>Nombre</th>
                            <th>Email</th>
                            <th>Teléfono</th>
                            <th>Colectivo</th>
                            <th>Acciones</th>
                        </tr>
                    </thead>
                    <tbody id="tabla-usuarios">
                        <!-- Los usuarios se cargarán aquí dinámicamente -->
                    </tbody>
                </table>
            </div>
            
            <!-- Paginación -->
            <nav aria-label="Paginación">
                <ul class="pagination justify-content-center" id="paginacion">
                    <!-- La paginación se generará dinámicamente -->
                </ul>
            </nav>
        </div>

        <!-- Formulario de usuario -->
        <div id="vista-formulario" class="vista d-none">
            <div class="d-flex justify-content-between align-items-center mb-4">
                <h2 id="titulo-formulario">Nuevo Usuario</h2>
                <button class="btn btn-secondary" id="btn-volver">
                    <i class="bi bi-arrow-left"></i> Volver a la lista
                </button>
            </div>
            
            <!-- Formulario con pestañas -->
            <form id="formulario-usuario">
                <!-- Pestañas de navegación -->
                <ul class="nav nav-tabs mb-4" id="pestanas-formulario" role="tablist">
                    <li class="nav-item" role="presentation">
                        <button class="nav-link active" id="tab-datos-personales" data-bs-toggle="tab" data-bs-target="#datos-personales" type="button">Datos Personales</button>
                    </li>
                    <li class="nav-item" role="presentation">
                        <button class="nav-link" id="tab-socio-familiares" data-bs-toggle="tab" data-bs-target="#socio-familiares" type="button">Datos Socio-Familiares</button>
                    </li>
                    <li class="nav-item" role="presentation">
                        <button class="nav-link" id="tab-formativos" data-bs-toggle="tab" data-bs-target="#formativos" type="button">Datos Formativos</button>
                    </li>
                    <li class="nav-item" role="presentation">
                        <button class="nav-link" id="tab-formacion-complementaria" data-bs-toggle="tab" data-bs-target="#formacion-complementaria" type="button">Formación Complementaria</button>
                    </li>
                </ul>
                
                <!-- Contenido de las pestañas -->
                <div class="tab-content" id="contenido-pestanas">
                    <!-- Pestaña 1: Datos Personales -->
                    <div class="tab-pane fade show active" id="datos-personales">
                        <div class="row">
                            <div class="col-md-6 mb-3">
                                <label for="nombre" class="form-label">Nombre *</label>
                                <input type="text" class="form-control" id="nombre" required>
                            </div>
                            <div class="col-md-6 mb-3">
                                <label for="apellidos" class="form-label">Apellidos *</label>
                                <input type="text" class="form-control" id="apellidos" required>
                            </div>
                        </div>
                        
                        <div class="row">
                            <div class="col-md-4 mb-3">
                                <label for="fecha_nacimiento" class="form-label">Fecha de nacimiento</label>
                                <input type="date" class="form-control" id="fecha_nacimiento">
                            </div>
                            <div class="col-md-4 mb-3">
                                <label for="edad" class="form-label">Edad</label>
                                <input type="number" class="form-control" id="edad" min="16" max="100">
                            </div>
                            <div class="col-md-4 mb-3">
                                <label for="nacionalidad" class="form-label">Nacionalidad</label>
                                <input type="text" class="form-control" id="nacionalidad">
                            </div>
                        </div>
                        
                        <div class="row">
                            <div class="col-md-6 mb-3">
                                <label for="documento_identidad" class="form-label">Documento de identidad</label>
                                <input type="text" class="form-control" id="documento_identidad">
                            </div>
                            <div class="col-md-6 mb-3">
                                <label for="sexo" class="form-label">Sexo</label>
                                <select class="form-select" id="sexo">
                                    <option value="">Seleccionar...</option>
                                    <option value="Mujer">Mujer</option>
                                    <option value="Hombre">Hombre</option>
                                </select>
                            </div>
                        </div>
                        
                        <div class="mb-3">
                            <label for="direccion" class="form-label">Dirección</label>
                            <input type="text" class="form-control" id="direccion">
                        </div>
                        
                        <div class="row">
                            <div class="col-md-4 mb-3">
                                <label for="localidad" class="form-label">Localidad</label>
                                <input type="text" class="form-control" id="localidad">
                            </div>
                            <div class="col-md-4 mb-3">
                                <label for="cp" class="form-label">Código Postal</label>
                                <input type="text" class="form-control" id="cp">
                            </div>
                            <div class="col-md-4 mb-3">
                                <label for="email" class="form-label">Email *</label>
                                <input type="email" class="form-control" id="email" required>
                            </div>
                        </div>
                        
                        <div class="row">
                            <div class="col-md-6 mb-3">
                                <label for="telefono1" class="form-label">Teléfono 1</label>
                                <input type="tel" class="form-control" id="telefono1">
                            </div>
                            <div class="col-md-6 mb-3">
                                <label for="telefono2" class="form-label">Teléfono 2</label>
                                <input type="tel" class="form-control" id="telefono2">
                            </div>
                        </div>
                        
                        <div class="row">
                            <div class="col-md-6 mb-3">
                                <label for="carnet" class="form-label">Carnet de conducir</label>
                                <select class="form-select" id="carnet">
                                    <option value="">No tiene</option>
                                    <option value="A">A</option>
                                    <option value="B">B</option>
                                    <option value="C">C</option>
                                    <option value="D">D</option>
                                    <option value="E">E</option>
                                </select>
                            </div>
                            <div class="col-md-6 mb-3">
                                <div class="form-check mt-4">
                                    <input class="form-check-input" type="checkbox" id="vehiculo_propio">
                                    <label class="form-check-label" for="vehiculo_propio">
                                        Vehículo propio
                                    </label>
                                </div>
                            </div>
                        </div>
                        
                        <div class="row">
                            <div class="col-md-6 mb-3">
                                <label for="discapacidad_porcentaje" class="form-label">% Discapacidad</label>
                                <input type="number" class="form-control" id="discapacidad_porcentaje" min="0" max="100">
                            </div>
                            <div class="col-md-6 mb-3">
                                <label for="discapacidad_tipo" class="form-label">Tipo de discapacidad</label>
                                <input type="text" class="form-control" id="discapacidad_tipo">
                            </div>
                        </div>
                    </div>
                    
                    <!-- Pestaña 2: Datos Socio-Familiares -->
                    <div class="tab-pane fade" id="socio-familiares">
                        <div class="row">
                            <div class="col-md-6 mb-3">
                                <label for="entidad_derivacion" class="form-label">Entidad de derivación</label>
                                <input type="text" class="form-control" id="entidad_derivacion">
                            </div>
                            <div class="col-md-6 mb-3">
                                <label for="tecnico_derivacion" class="form-label">Técnico/a de derivación</label>
                                <input type="text" class="form-control" id="tecnico_derivacion">
                            </div>
                        </div>
                        
                        <div class="mb-3">
                            <label for="colectivo" class="form-label">Colectivo</label>
                            <select class="form-select" id="colectivo">
                                <option value="">Seleccionar...</option>
                                <option value="Desempleados de larga duración">Desempleados de larga duración</option>
                                <option value="Jóvenes">Jóvenes</option>
                                <option value="Mujeres">Mujeres</option>
                                <option value="Personas con discapacidad">Personas con discapacidad</option>
                                <option value="Mayores de 45 años">Mayores de 45 años</option>
                            </select>
                        </div>
                        
                        <div class="mb-3">
                            <label for="composicion_familiar" class="form-label">Composición familiar</label>
                            <textarea class="form-control" id="composicion_familiar" rows="3"></textarea>
                        </div>
                        
                        <div class="mb-3">
                            <label for="situacion_economica" class="form-label">Situación económica</label>
                            <textarea class="form-control" id="situacion_economica" rows="3"></textarea>
                        </div>
                        
                        <div class="mb-3">
                            <label class="form-label">Miembros perceptores de ingresos</label>
                            <div id="miembros-perceptores">
                                <div class="row mb-2 miembro-perceptor">
                                    <div class="col-md-3">
                                        <input type="number" class="form-control" placeholder="Número" min="1">
                                    </div>
                                    <div class="col-md-5">
                                        <input type="text" class="form-control" placeholder="Tipo (ej: Prestación)">
                                    </div>
                                    <div class="col-md-3">
                                        <input type="text" class="form-control" placeholder="Cantidad">
                                    </div>
                                    <div class="col-md-1">
                                        <button type="button" class="btn btn-danger btn-sm btn-eliminar-miembro">
                                            <i class="bi bi-trash"></i>
                                        </button>
                                    </div>
                                </div>
                            </div>
                            <button type="button" class="btn btn-outline-primary btn-sm mt-2" id="btn-agregar-miembro">
                                <i class="bi bi-plus"></i> Agregar miembro
                            </button>
                        </div>
                        
                        <div class="mb-3">
                            <label for="otras_situaciones" class="form-label">Otras situaciones y circunstancias de interés</label>
                            <textarea class="form-control" id="otras_situaciones" rows="3"></textarea>
                        </div>
                    </div>
                    
                    <!-- Pestaña 3: Datos Formativos -->
                    <div class="tab-pane fade" id="formativos">
                        <div class="mb-3">
                            <label for="formacion_academica" class="form-label">Formación académica</label>
                            <select class="form-select" id="formacion_academica">
                                <option value="">Seleccionar...</option>
                                <option value="SIN ESTUDIOS">Sin estudios</option>
                                <option value="E.S.O.">E.S.O.</option>
                                <option value="BACHILLERATO">Bachillerato</option>
                                <option value="F.P. GRADO MEDIO">F.P. Grado Medio</option>
                                <option value="F.P. GRADO SUPERIOR">F.P. Grado Superior</option>
                                <option value="DIPLOMATURA">Diplomatura</option>
                                <option value="LICENCIADO/A - ING. SUPERIOR">Licenciado/a - Ing. Superior</option>
                                <option value="DOCTORADO">Doctorado</option>
                            </select>
                        </div>
                        
                        <div class="row">
                            <div class="col-md-6 mb-3">
                                <label for="ano_finalizacion" class="form-label">Año de finalización</label>
                                <input type="number" class="form-control" id="ano_finalizacion" min="1950" max="2023">
                            </div>
                        </div>
                        
                        <div class="mb-3">
                            <label for="idiomas" class="form-label">Idiomas</label>
                            <textarea class="form-control" id="idiomas" rows="3" placeholder="Ej: Inglés (B2), Francés (B1)..."></textarea>
                        </div>
                        
                        <div class="mb-3">
                            <label for="informatica" class="form-label">Informática</label>
                            <textarea class="form-control" id="informatica" rows="3" placeholder="Ej: Office, Photoshop, Programación..."></textarea>
                        </div>
                        
                        <div class="mb-3">
                            <label for="experiencia_laboral_previa" class="form-label">Experiencia laboral previa</label>
                            <textarea class="form-control" id="experiencia_laboral_previa" rows="4"></textarea>
                        </div>
                    </div>
                    
                    <!-- Pestaña 4: Formación Complementaria -->
                    <div class="tab-pane fade" id="formacion-complementaria">
                        <div id="formacion-complementaria-lista">
                            <!-- Los cursos se agregarán dinámicamente aquí -->
                        </div>
                        
                        <button type="button" class="btn btn-outline-primary mb-3" id="btn-agregar-curso">
                            <i class="bi bi-plus"></i> Agregar curso
                        </button>
                        
                        <!-- Plantilla para nuevos cursos (oculta) -->
                        <div id="plantilla-curso" class="d-none">
                            <div class="card mb-3 curso-item">
                                <div class="card-header d-flex justify-content-between align-items-center">
                                    <span>Curso</span>
                                    <button type="button" class="btn btn-sm btn-danger btn-eliminar-curso">
                                        <i class="bi bi-trash"></i>
                                    </button>
                                </div>
                                <div class="card-body">
                                    <div class="row">
                                        <div class="col-md-6 mb-3">
                                            <label class="form-label">Nombre del curso</label>
                                            <input type="text" class="form-control nombre-curso" required>
                                        </div>
                                        <div class="col-md-3 mb-3">
                                            <label class="form-label">Duración</label>
                                            <input type="text" class="form-control duracion-curso" placeholder="Ej: 3 meses">
                                        </div>
                                        <div class="col-md-3 mb-3">
                                            <label class="form-label">Horas</label>
                                            <input type="number" class="form-control horas-curso" min="1">
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="col-md-6 mb-3">
                                            <label class="form-label">Entidad</label>
                                            <input type="text" class="form-control entidad-curso">
                                        </div>
                                        <div class="col-md-6 mb-3">
                                            <label class="form-label">Fecha de realización</label>
                                            <input type="date" class="form-control fecha-curso">
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Botones del formulario -->
                <div class="d-flex justify-content-between mt-4">
                    <button type="button" class="btn btn-secondary" id="btn-limpiar">Limpiar formulario</button>
                    <div>
                        <button type="button" class="btn btn-outline-danger me-2" id="btn-cancelar">Cancelar</button>
                        <button type="submit" class="btn btn-primary" id="btn-guardar">Guardar usuario</button>
                    </div>
                </div>
            </form>
        </div>

        <!-- Vista de detalles -->
        <div id="vista-detalles" class="vista d-none">
            <div class="d-flex justify-content-between align-items-center mb-4">
                <h2>Detalles del Usuario</h2>
                <div>
                    <button class="btn btn-warning me-2" id="btn-editar-desde-detalles">
                        <i class="bi bi-pencil"></i> Editar
                    </button>
                    <button class="btn btn-info me-2" id="btn-generar-pdf">
                        <i class="bi bi-file-earmark-pdf"></i> Generar PDF
                    </button>
                    <button class="btn btn-secondary" id="btn-volver-desde-detalles">
                        <i class="bi bi-arrow-left"></i> Volver
                    </button>
                </div>
            </div>
            
            <div id="contenido-detalles">
                <!-- Los detalles se cargarán aquí dinámicamente -->
            </div>
        </div>
    </div>

    <!-- Modal de confirmación -->
    <div class="modal fade" id="modal-confirmacion" tabindex="-1">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">Confirmar acción</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body" id="mensaje-confirmacion">
                    ¿Estás seguro de que deseas realizar esta acción?
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancelar</button>
                    <button type="button" class="btn btn-primary" id="btn-confirmar-accion">Confirmar</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Toast para notificaciones -->
    <div class="position-fixed bottom-0 end-0 p-3" style="z-index: 11">
        <div id="toast-notificacion" class="toast" role="alert">
            <div class="toast-header">
                <strong class="me-auto" id="toast-titulo">Notificación</strong>
                <button type="button" class="btn-close" data-bs-dismiss="toast"></button>
            </div>
            <div class="toast-body" id="toast-mensaje">
                Mensaje de notificación
            </div>
        </div>
    </div>

    <!-- Scripts -->
     <script src="js/api.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="js/forms.js"></script>
    <script src="js/app.js"></script>
</body>
</html>